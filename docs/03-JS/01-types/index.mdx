# æ•°æ®ç±»å‹

å…± 8 ç§æ•°æ®ç±»å‹ï¼Œ6 ç§å¸¸ç”¨ + BigInt + Objectã€‚ä»¥ä¸‹æ˜¯åŸå§‹ç±»å‹çš„æè¿°ï¼Œåè¿‡æ¥å°±æ˜¯å¼•ç”¨ç±»å‹ Objectã€‚

> In JavaScript, a primitive (primitive value, primitive data type) is data that is not an object and has no methods or properties.

## ç±»å‹æ£€æµ‹

> å¦‚æœä½ æ‰‹é‡Œæœ‰ä¸€æŠŠé”¤å­ï¼Œæ‰€æœ‰ä¸œè¥¿çœ‹ä¸Šå»éƒ½åƒé’‰å­

è€ƒè™‘çš„æ€è·¯æ˜¯å…ˆæ˜ç¡®è¦åˆ¤æ–­ä»€ä¹ˆç±»å‹ï¼Œç„¶åå†æ˜¯é€‰æ‹©å·¥å…·ã€‚ç„¶ååœ¨å·¥å…·é€‰æ‹©ä¸Šï¼ŒåŸåˆ™å°±æ˜¯æ€ä¹ˆå‡†ç¡®åˆç®€å•ï¼Œå°±æ€ä¹ˆæ¥ã€‚

| ç›®æ ‡ç±»å‹ | åˆ¤æ–­æ–¹å¼      |
| :------: | ------------- |
| åŸºç¡€ç±»å‹ | typeof        |
|   å‡½æ•°   | typeof        |
|   æ•°ç»„   | Array.isArray |
|   null   | ===           |
| å®ä¾‹å…³ç³» | instanceof    |

å…¶ä»–æƒ…å†µå¯ä»¥ä½¿ç”¨ Object.prototype.toString.callï¼Œä¸åº”è¯¥ä½¿ç”¨çš„ constructor å°±ä¸è¯´äº†ã€‚

:::note ğŸ¤”
æˆ‘çš„æ–¹æ¡ˆæ˜¯å†™ä¸€ä¸ªç»Ÿä¸€çš„ç±»å‹åˆ¤æ–­çš„å°å·¥å…·ï¼Œä¸å†æ¯æ¬¡éœ€è¦çš„æ—¶å€™å†å„è‡ªè‡ªå®šä¹‰å®ç°ã€‚
ä¸€æ¬¡åšåŠŸï¼Œé•¿ä¹…æ”¶ç›Šã€‚
:::

## ç±»å‹è½¬æ¢

è¯´åˆ°ç±»å‹è½¬æ¢ï¼Œéƒ½å…ä¸äº†æåˆ°**æ˜¾å¼è½¬æ¢/å¼ºåˆ¶è½¬æ¢** å’Œ **éšå¼è½¬æ¢** è¿™ä¸¤ç§åˆ’åˆ†ã€‚

```mermaid
  flowchart LR
  A(åˆ†ç±»)
  B(å¼ºåˆ¶è½¬æ¢)
  C(éšå¼è½¬æ¢)
  A --> B
  A --> C
```

æ˜¾éšæ˜¯ç›¸å¯¹çš„ï¼Œå¦‚æœæ˜¯ä»å­—é¢æ„ä¹‰çš„â€œæ˜æ˜¾ç¨‹åº¦â€œæ¥åšåŒºåˆ†ï¼Œé‚£æ¯ä¸ªäººç†è§£æ·±åº¦ä¸ä¸€æ ·ï¼Œæ— æ³•å½¢æˆæ ‡å‡†ã€‚

æ˜¾éšï¼Œåº”è¯¥æ˜¯ä»è¡¨è¾¾å¼çš„ç›®æ ‡å’Œå®ç°åŒºåˆ†

- å¼ºåˆ¶è½¬æ¢ï¼šç›®æ ‡ä¸Š **æ˜¯** ç±»å‹è½¬æ¢ï¼Œå®ç°ä¸Š **æ˜ç¡®è°ƒç”¨** è½¬æ¢æ–¹æ³•æˆ–ä½¿ç”¨ç±»å‹è½¬æ¢çš„æ“ä½œç¬¦
- éšå¼è½¬æ¢ï¼šç›®æ ‡ä¸Š **å¹¶ä¸æ˜¯** åšè½¬æ¢ï¼Œå®ç°ä¸Š **å¹¶æ²¡æœ‰è°ƒç”¨** ç‰¹å®šçš„è½¬æ¢æ–¹æ³•æˆ–ç±»å‹è½¬æ¢çš„æ“ä½œç¬¦

æ˜¾éšçš„åŒºåˆ†ï¼Œæ›´å¤šåªæ˜¯ä¸ºäº†å¸®åŠ©æˆ‘ä»¬ç†è§£é‚£äº›ç‰¹æ®Šçš„æƒ…å†µï¼Œåœ¨ä½¿ç”¨ç±»å‹è½¬æ¢æ—¶ï¼Œæˆ‘ä»¬æ€è€ƒçš„é¡ºåºå¦‚ä¸‹æ‰€ç¤º

```mermaid
flowchart LR
  A(æˆ‘æƒ³è½¬æ¢ä¸ºä»€ä¹ˆç±»å‹) ---> B(æˆ‘å¦‚ä½•è½¬æ¢)
```

å…ˆæ ¹æ®ç›®æ ‡ç±»å‹åˆ’åˆ†ï¼Œå†é€‰æ‹©è½¬æ¢çš„å®ç°æ–¹å¼ï¼Œè¿™æ˜¯æ¢³ç†ç±»å‹è½¬æ¢ç›¸å…³çŸ¥è¯†çš„è¾ƒå¥½çš„æ–¹å¼ã€‚

```mermaid
  flowchart LR
  A(ç›®æ ‡ç±»å‹)
  Number(Number)
  String(String)
  Boolean(Boolean)
  Array(Array)
  A --> Number
  A --> String
  A --> Boolean
  A --> Array
```

ç±»å‹è½¬æ¢ï¼Œæ—¥å¸¸ä½¿ç”¨çš„åŸºæœ¬ä¸Šæ˜¯è½¬æ¢åˆ° Number, String, Array, Boolean è¿™å‡ ç§æƒ…å†µã€‚

:::note
å½“æˆ‘ä»¬è¯´åˆ°ç±»å‹è½¬æ¢æ—¶ï¼Œå¯ä»¥åˆ†æˆä¸¤ä¸ªé—®é¢˜ï¼š

- ä» A ç±»å‹è½¬æ¢åˆ° B ç±»å‹ï¼Œåº”è¯¥ä½¿ç”¨æ€æ ·çš„æ–¹å¼
- ä» A ç±»å‹è½¬æ¢åˆ° B ç±»å‹ï¼Œé‡‡ç”¨çš„è½¬æ¢æ–¹å¼ä¼šç»å†æ€ä¹ˆçš„è¿‡ç¨‹ï¼Œå¾—åˆ°æ€æ ·çš„ç»“æœ

ç›¸å¯¹æ¥è¯´ï¼Œç¬¬äºŒä¸ªå¯èƒ½ä¸æ˜¯é‚£ä¹ˆæ˜æ˜¾çš„ï¼Œæœ‰æ—¶ç»è¿‡ä¼šæœ‰äº›æ›²æŠ˜ã€‚
:::

## toString {#toString}

### Primitive

åŸºç¡€ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯ä¸ä¸€ä¸ªç©ºå­—ç¬¦ä¸²`''`ç›¸åŠ ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯åŸæ¥çš„å†…å®¹è½¬æ¢æˆå­—ç¬¦ä¸²å½¢å¼ã€‚

```js
null + ""; // 'null'
undefined + ""; // 'undefined'
true + ""; // 'true'
1 + ""; // '1'
```

ä¹Ÿæœ‰ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œä½†ä¸å¤æ‚

```js
0.0000000001 + ""; // '1e-10' æ•°å­—ç‰¹åˆ«å¤§æˆ–è€…ç‰¹åˆ«å°ä¼šå˜æˆæŒ‡æ•°å½¢å¼
Symbol("foo").toString(); // 'Symbol(foo)'
```

å…¶ä¸­ Symbol çš„å­—ç¬¦ä¸²æ›´å¤šåªæ˜¯ä¾¿äºåŒºåˆ†ï¼Œæ—¥å¸¸å¼€å‘ä¸­ä¹Ÿä¸éœ€è¦å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚

### Array

æ•°ç»„è½¬å­—ç¬¦ä¸²

```js
[1, 2, 3].toString(); // '1,2,3'
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`toString` å°è¯•è°ƒç”¨ `join`ï¼Œjoin çš„é»˜è®¤æ‹¼æ¥å­—ç¬¦æ˜¯ `,`

```js title="éªŒè¯ toString æ–¹æ³•çš„è°ƒç”¨è¿‡ç¨‹"
const arr = [1, 2, 3];
arr.join = "wow";
arr.toString(); // [object Array]

arr.join = function () {
  return "myy";
};
arr.toString(); // myy

arr.toString = function () {
  return "esmyy";
};
arr.toString(); // esmyy
```

è°ƒç”¨å…³ç³»æè¿°å¦‚ä¸‹

> The toString method of arrays calls join() internally, which joins the array and returns one string containing each array element separated by commas. If the join method is unavailable or is not a function, Object.prototype.toString is used instead, returning [object Array].

```mermaid
  flowchart LR
  A(toString) --é»˜è®¤è°ƒç”¨--> B(join) --å¦‚æœjoinä¸å¯ç”¨--> C("Object.prototype.toString")
```

## toNumber

è½¬æ¢ä¸º Number ç±»å‹çš„åœºæ™¯ï¼Œå¤§å¤šæ•°çš„åœºæ™¯æ˜¯ä» String è½¬æ¢ä¸º Numberï¼Œä¸»è¦æœ‰ parseIntã€parseFloatã€Number 3 ç§æ–¹å¼ã€‚

```mermaid
  flowchart LR
  A[è½¬æ¢ä¸ºnumberçš„æ–¹å¼] --> B[parseInt]
  A --> C[parseFloat]
  A --> D[Number]
  A --> E[+ æ“ä½œç¬¦]
```

JS ä¸­å¹¶æ²¡æœ‰æ•´æ•°å’Œæµ®ç‚¹æ•°çš„ä¸åŒç±»å‹ï¼Œéƒ½æ˜¯ Numberï¼Œä¸åŒçš„è½¬æ¢æ–¹å¼ï¼Œåªæ˜¯è½¬æ¢å¤„ç†è¿‡ç¨‹çš„ä¸ä¸€æ ·ï¼Œä»è€Œå¯¼è‡´çš„ç»“æœçš„ä¸ä¸€æ ·ã€‚

### parseInt

```js
parseInt(str, radix);
```

ç”±äºå‚æ•°çš„ä¸åŒï¼ŒparseInt çš„å¤„ç†è¿‡ç¨‹ï¼Œæœ‰éå¸¸å¤šçš„æƒ…å†µï¼Œé å•çº¯çš„è®°å¿†æ˜¯å¾ˆå®¹æ˜“å¿˜è®°çš„ã€‚
æˆ‘å°†è¿™ä¸ªæµç¨‹ï¼Œæ‹†åˆ†æˆä¸¤ä¸ªå­æ­¥éª¤

1. ç¬¬ä¸€ä¸ªå‚æ•°å¦‚æœä¸æ˜¯å­—ç¬¦ä¸²ï¼Œä¼šå°è¯•è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¦‚ä½•è½¬æ¢å¯å‚è€ƒä¸Šé¢çš„ [toString](#toString)
2. å­—ç¬¦ä¸²ä»åšåˆ°å³æˆªå–ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ï¼Œç„¶åå†åšè½¬æ¢ï¼Œå‚è€ƒ [MDN parseInt](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt) çš„è¯´æ˜

å…³äºç¬¬ 2 ç‚¹ï¼Œæœ‰ä»¥ä¸‹ç‰¹ç‚¹

- radix ä»‹äº [2-36]
- ä¸æä¾›ç¬¬äºŒä¸ªå‚æ•°ï¼Œå¦‚æœæ˜¯`/^0x/i.test(str.trim())`åˆ™ä¸º 16 è¿›åˆ¶å…¶ä»–ä¸º 10
- å¹¶ä¸è¯†åˆ« `0b`ï¼Œä¸ä¼šå½“åš 2 è¿›åˆ¶
- å‰é¢çš„ç©ºæ ¼, 0 ä¼šè¢«å¿½ç•¥

åœ¨ç¬¬ 1 æ­¥ç¡®ä¿å¾—åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²åï¼ŒparseInt çš„ç»“æœæ˜¯ NaN è¿˜æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå–å†³äºèƒ½å¦æ»¡è¶³ **ç¬¬ä¸€ä¸ªæœ‰æ•ˆå­—ç¬¦æ˜¯åˆæ³•å­—ç¬¦** çš„æ¡ä»¶

```js
// å¹¶ä¸å®Œå…¨å‡†ç¡®ï¼Œå¤§æ¦‚é€»è¾‘å¦‚ä¸‹
const chars = "0123456789abcdefghijklmnopqrstuvwxyz";
const validate = function (str: string, radix?: number) {
  if (radix && (radix < 2 || radix > 36)) {
    return false;
  }

  let computedRadix = 10;
  if (!radix && /^\s*0x/i.test(str)) {
    computedRadix = 16;
  }

  const validChars = chars.slice(0, computedRadix);
  const validReg = new RegExp(`^\s*[+-]?(0x)?[` + validChars + "]+", "i");
  return validReg.test(str);
};
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¸­ **ç¬¬ä¸€ä¸ªæœ‰æ•ˆå­—ç¬¦** çš„åŒ¹é…æ˜¯æ ¹æ®å‚æ•°åŠ¨æ€è®¡ç®—å¾—åˆ°çš„ï¼Œå¯ä»¥åŠ¨æ€åœ°åˆ¤æ–­æ˜¯å¦èƒ½å¤Ÿå¾—åˆ°ä¸€ä¸ªæ•°å­—ã€‚
è¿™æ ·å¯¹äº parseInt çš„å¤„ç†ï¼ŒæŒ‰ç…§ä¸‹é¢è¿™ä¸ªæµç¨‹ï¼Œå°±èƒ½å¤Ÿåšåˆ°æ¯”è¾ƒç®€å•ï¼Œä¹Ÿæ¯”è¾ƒå‡†ç¡®åœ°åˆ¤æ–­äº†

```mermaid
  flowchart LR
  A[ç¬¬ä¸€ä¸ªå‚æ•°è½¬æ¢æˆå­—ç¬¦ä¸²] --> B[æ ¹æ®validateæˆªå–ä¸€ä¸ªå­ä¸²] --> C[æ ¹æ®radixè¿›åˆ¶è½¬æ¢ä¸º10è¿›åˆ¶æ•°å­—]
```

```js
// éå­—ç¬¦ä¸²å€¼çš„æƒ…å†µ
parseInt(null);
parseInt(undefined);
parseInt(null, 36);
parseInt(true);
```

åŒ¹é…è§„åˆ™ä¸Šï¼Œå¦‚æœç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ï¼Œä¸ç¬¦åˆ radix è¦æ±‚çš„åˆæ³•å­—ç¬¦ï¼Œåˆ™è¿”å› NaN

```js
parseInt("0xe"); // 15
parseInt("00xe"); // 0
parseInt("1e2"); // 1 ä¸è¯†åˆ«æŒ‡æ•°å½¢å¼

parseInt(undefined); // NaN
parseInt(null, 36); // 1112745ï¼Œnullå…ˆè½¬æ¢ä¸ºå­—ç¬¦'null'ï¼Œéƒ½æ˜¯36è¿›åˆ¶çš„åˆæ³•å­—ç¬¦

parseInt("15,123", 10); // 15, æœ‰æ•ˆå­—ç¬¦åå‡ºç°éæœ‰æ•ˆå­—ç¬¦ï¼Œä¼šæˆªå–ï¼Œè€Œä¸æ˜¯NaN
parseInt("FXX123", 16); // 15
```

### parseFloat

```js
parseFloat(str);
```

parseFloat çš„æˆªå–è§„åˆ™ä¸ parseInt å·®ä¸å¤šï¼Œéƒ½æ˜¯ä»å·¦åˆ°å³æˆªå–ç¬¦åˆè¦æ±‚çš„éƒ¨åˆ†ï¼Œåªæ˜¯â€è¦æ±‚â€œæœ‰æ‰€å˜åŒ–ï¼Œç‰¹åˆ«ä¹‹å¤„åœ¨äºå®ƒèƒ½å¤Ÿ

- è¯†åˆ«ä¸€äº›ç‰¹æ®Šå€¼
- è¯†åˆ«æŒ‡æ•°å½¢å¼
- åˆæ³•å­—ç¬¦å¤šäº†æŒ‡æ•°çš„`e`å’Œå°æ•°çš„`.`

```js
// è¯†åˆ«ä¸€äº›ç‰¹æ®Šå€¼
parseFloat("Infinity"); // Infinity
parseFloat("-Infinity"); // -Infinity

// ä¸æ”¯æŒ16 è¿›åˆ¶çš„è¯†åˆ«
parseFloat("FF2"); // NaN
parseFloat("0xFF2"); // 0

// ä¸€æ ·ä¼šæˆªå–ï¼Œä¸ä¼šå› ä¸ºåé¢æœ‰ä¸ç¬¦åˆçš„å°±NaN
parseFloat("3.14some non-digit characters");

parseInt("1e2"); // 100 è¯†åˆ«æŒ‡æ•°å½¢å¼
```

:::note
Number.parseInt å’Œ Number.parseFloat æ˜¯ä¸¤ä¸ª parse å‡½æ•°çš„æ¨¡å—åŒ–ç‰ˆæœ¬ï¼Œå¤„ç†è¿‡ç¨‹æ˜¯ä¸€æ ·çš„ï¼Œè¿™ä¹Ÿæ˜¯ JS è¿›æ­¥çš„ä½“ç°ã€‚
:::

### Number()

ç›¸å¯¹ Number() è€Œè¨€ï¼ŒparseXxx æŒ‡é’ˆå¯¹äºå­—ç¬¦ä¸²è€Œè¨€çš„ï¼Œåˆ¤æ–­ç»“æœæ˜¯ Number è¿˜æ˜¯ NaN çš„é€»è¾‘æ›´å®¹æ˜“ç†è§£å’Œè®°å¿†ã€‚
è€Œ `Number()` å°±æ¯”è¾ƒé›¶æ•£ï¼Œæ²¡æœ‰èƒ½å¤Ÿå±‚å±‚æ¨è¿›çš„åˆ¤æ–­é€»è¾‘ï¼Œæ›´å¤šæ˜¯é åˆ—ä¸¾ï¼Œå‚è€ƒ[Number coercion](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number#number_coercion)ã€‚

:::tips
`+`ç¬¦åˆè½¬æ¢å’Œ Number()çš„å¤„ç†è¿‡ç¨‹ä¸€æ ·ã€‚
:::

## ç‰¹æ®Šå€¼æ£€æµ‹

```js
// null
val === null;

// undefined
val === void 0;
val === undefined;
typeof val === "undefined";

// isNaN
val !== val;
isNaN(val) && typeof val === "number";
Number.isNaN(val);
```

## è£…ç®±è¿‡ç¨‹

åŸå§‹ç±»å‹ä¸­ï¼Œæœ‰äº›ç±»å‹æ¯”è¾ƒç‰¹æ®Š

<Mindmap
  chart={`
  mindmap
    root((åŒ…è£…å¯¹è±¡))
      Number
      String
      Boolean
`}
/>

è¿™å‡ ä¸ªç±»å‹å„è‡ªå¯¹åº”æœ‰ä¸€ä¸ªåŒåå‡½æ•°ï¼Œä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œè¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼Œè¿™ä¸ç›´æ¥ä½¿ç”¨å­—é¢é‡çš„æ–¹å¼å®šä¹‰ä¸€è‡´ã€‚
ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨æ—¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ç§°ä½œåŒ…è£…å¯¹è±¡ã€‚

```js
const str1 = String("esmyy");
typeof str1; // string

const str2 = new String("esmyy");
typeof str2; // object
```

åŒ…è£…å¯¹è±¡çš„â€œåŒ…è£…â€æ˜¯é’ˆå¯¹äºåŸå§‹ç±»å‹çš„ï¼Œå°±åƒæ˜¯ç»™åŸå§‹ç±»å‹å¥—ä¸Šäº†å±æ€§ï¼Œæ–¹æ³•ï¼Œå˜æˆäº†ä¸€ä¸ªå¯¹è±¡ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šï¼Œä¹Ÿä¸åº”è¯¥è°ƒç”¨åŸå§‹ç±»å‹çš„æ„é€ å‡½æ•°,
æˆ‘ä»¬è¯´åˆ°â€œåŒ…è£…å¯¹è±¡â€ï¼Œæ›´å¤šæ˜¯åœ¨è§£é‡Šè®¿é—®åŸå§‹ç±»å‹å˜é‡çš„å±æ€§æˆ–æ–¹æ³•æ—¶å‘ç”Ÿçš„â€åŒ…è£…â€œè¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°åšè£…ç®±ã€‚

> When properties are accessed on primitives, JavaScript auto-boxes the value into a wrapper object and accesses the property on that object instead.

```js
str1.includes("myy"); // true
```

åŸå§‹ç±»å‹æ²¡æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œä½†æ˜¯å½“è®¿é—®å±æ€§æ—¶ï¼Œä¼šä¸´æ—¶åšä¸€ä¸ªåŒ…è£…ã€‚

:::note å¯¹æ¯”
ç¨‹åºå‘˜æ—¥å¸¸å¹¶ä¸è¥¿è£…é©å±¥ï¼Œä½†éœ€è¦çš„æ—¶å€™ä¹Ÿå¯ä»¥çš„ã€‚
æœ‰çš„åŸå§‹ç±»å‹å¹¶ä¸å…·å¤‡åŒ…è£…æ–¹æ³•ï¼Œå°±åƒæœ‰äº›ç¨‹åºå‘˜å¹³æ—¶çœ‹èµ·æ¥é‚‹é¢ï¼Œç‰¹æ®Šæ—¶å€™ä¹Ÿ...å§‹ç»ˆå¦‚ä¸€ã€‚
:::

## æ‹†ç®±è½¬æ¢

æ‹†ç®±è½¬æ¢ï¼Œå°±æ˜¯å¯¹è±¡è½¬æ¢ä¸ºåŸå§‹å€¼çš„è¿‡ç¨‹ã€‚åœ¨æ‹†ç®±è½¬æ¢çš„è¿‡ç¨‹ä¸­ï¼Œå†…éƒ¨ä¼šæ ¹æ®ä½¿ç”¨çš„åœºæ™¯ï¼Œåˆ¤æ–­éœ€è¦çš„æ˜¯æ€æ ·çš„ä¸€ä¸ªç±»å‹ï¼Œè¿™ä¸ªç±»å‹ç§°ä¸º hintã€‚hint æœ‰ 3 ç§æƒ…å†µ

```mermaid
  flowchart LR
  hint{hint}
  hint --string--> A2[toSting] --> A3[valueOf]
  hint --number--> B2[valueOf] --> B3[toString]
  hint --default --> B2
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œæ ¹æ® hint çš„ä¸åŒï¼Œä¼šæŒ‰ç…§ä»¥ä¸Šç¤ºæ„çš„é¡ºåºå°è¯•è¿›è¡Œè°ƒç”¨ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ

- å¦‚æœå¾—åˆ°ä¸€ä¸ªåŸå§‹å€¼(æ³¨æ„ï¼Œå¹¶ä¸ä¸€å®šå’Œ hint ç±»å‹ä¸€è‡´)ï¼Œåˆ™ç»“æŸè°ƒç”¨è·¯å¾„ï¼Œè¿”å›

  ```js
  const obj = {
    toString() {
      return 1;
    },
    valueOf() {
      return 2;
    },
  };

  String(obj); // '1'
  Number(obj); // 2
  ```

- å¦‚æœè¿”å›çš„æ˜¯å¼•ç”¨ç±»å‹(åŒ…æ‹¬ Array è¿™äº›å­ç±»å‹)ï¼Œåˆ™ç»§ç»­è°ƒç”¨è·¯å¾„ä¸­çš„å‡½æ•°

  ```js
  const obj = {
    toString() {
      console.log("toString");
      return 1;
    },
    valueOf() {
      console.log("valueOf");
      return [];
    },
  };

  obj + 300; // ä¾æ¬¡æ‰“å° valueOf toString 301
  ```

- å¦‚æœè¿‡ç¨‹ä¸­æŸä¸ªâ€å°è¯•è°ƒç”¨çš„å‡½æ•°â€œä¸æ˜¯ functionï¼Œåˆ™è·³è¿‡

  ```js
  const obj = {
    toString() {
      return 1;
    },
    valueOf: 'hahaha';
  };

  Number(obj); // 1
  ```

- å¦‚æœæœ€ç»ˆçš„å‡½æ•°è°ƒç”¨è¿”å›çš„æ˜¯å¼•ç”¨ç±»å‹ï¼ŒæŠ¥`TypeError`

  ```js
  const obj = {
    toString() {
      console.log("toString");
      return [];
    },
    valueOf() {
      console.log("valueOf");
      return {};
    },
  };

  Number(obj);
  // valueOf
  // toString
  // Uncaught TypeError: Cannot convert object to primitive value
  ```

ES6 æ‹“å±•äº†ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼Œæ”¯æŒè‡ªå®šä¹‰è½¬æ¢ä¸ºåŸå§‹å€¼çš„è¿‡ç¨‹

```js
const obj = {
  [Symbol.toPrimitive](hint) {
    // ...
  },
};
```

å®šä¹‰äº†è‡ªå®šä¹‰çš„è½¬æ¢æ–¹æ³•åï¼Œä¸èµ°é»˜è®¤é€»è¾‘ï¼Œå°±è·Ÿ`valueOf`å’Œ`toString`æ²¡å•¥å…³ç³»äº†ï¼Œä½†æ˜¯åŒæ ·çš„ï¼Œå¦‚æœè¿”å›çš„å€¼ä¸æ˜¯ä¸€ä¸ª primitiveï¼Œä¼šæŠ¥ TypeErrorã€‚

:::tip å°ç»“
æ‹†ç®±è½¬æ¢è¿‡ç¨‹ä¸­ï¼Œhint åªå½±å“äº†è°ƒç”¨é¡ºåºï¼Œä¸å®é™…è¿”å›å€¼çš„ç±»å‹æ— å…³ã€‚æ‹†ç®±è½¬æ¢åªæ˜¯å¾—åˆ°ä¸€ä¸ªåŸå§‹å€¼ï¼Œå¦‚æœå¾—åˆ°çš„å€¼ä¸ hint ä¸ä¸€è‡´ï¼Œæ˜¯æ‹†ç®±è½¬æ¢ä¹‹åå†ç±»å‹è½¬æ¢ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¹Ÿç§°åš**å…ˆæ‹†ç®±åè½¬æ¢**ã€‚

TODOï¼š è¦åˆ¤æ–­æ‹†ç®±è½¬æ¢çš„ç»“æœï¼Œå…ˆè¦ç¡®å®šåœ¨ä¸åŒçš„æƒ…å†µä¸‹ hint æ˜¯ä»€ä¹ˆï¼Œè¿™ä¸ªå¦‚ä½•ç¡®å®š
å‚è€ƒ [MDN Symbol.toPrimitive](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toPrimitive)
[ECMA ToPrimitive](https://tc39.es/ecma262/#sec-toprimitive)
:::

<!-- å‚è€ƒ[JSON](#JSON) -->

<!-- ## BigInt -->
