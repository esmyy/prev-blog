<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>
    说说 | esmyy
  </title>
  <meta name="description" content="">
  <meta name="keywords" content="esmyy, 马月月, 月月, 冯朋, esmyy的博客, 马月月的博客, 马月月的个人网站">
  <meta name="author" content="Esmyy">
  <meta name="theme-color" content="#1e2327">
  <link rel="icon" type="image/png" href="//cdn.jsdelivr.net/gh/esmyy/imghost@main/images/favicon.png">
  <script src="https://lf1-cdn-tos.bytegoofy.com/obj/iconpark/icons_20170_49.a2eea49a83c8e5f5586d26b3c31b0650.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/viewerjs/1.11.3/viewer.min.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="https://cdn.bootcdn.net/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
  <link href="https://cdn.bootcdn.net/ajax/libs/viewerjs/1.11.3/viewer.min.css" rel="stylesheet">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/esmyy/imghost@main/css/main.css">
  <script src="//cdn.jsdelivr.net/gh/esmyy/imghost@main/js/helpers.umd.js">
  </script>
  <script>
    var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?070203f9e1b528911cb841163f395354";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="esmyy" type="application/atom+xml">
</head>

<body>
<div id="leancloudApp" style="display:none;" data-app-id="HIPSmz3qt9iZF654dkSgfXr2-MdYXbMMI" data-app-key="IIZyd4Ee0LH46v96sUQFgo7V" data-server-urls="https://ssapi.esmyy.com">
</div>

<div id="esmyy">
    
        <div class="firstScreen " id="firstScreen" style="background-image: url(//cdn.jsdelivr.net/gh/esmyy/imghost@main/images/air-beijing-chengdu.jpg)">
  <div class="lifeCard">
    <p>慎思笃行</p>
  </div>
  <div class="pictureIntroduction" style="color: #fff">
    <p></p>
    <p><iconpark-icon class="pr-4" size="16" name="local-two" style="margin-left: -2px;"></iconpark-icon>北京飞往成都</p>
    <p><iconpark-icon class="pr-4" name="calendar-thirty-two"></iconpark-icon>2022年10月11日</p>
  </div>
  <div class="scrollDownWrapper" id="scrollDownWrapper">
    <div class="scrollDown">
      <iconpark-icon name="double-down" size="32" color="#fff"></iconpark-icon>
    </div>
  </div>
</div>
        
<header>
  <div class="mainContent headerContent">
    <ul class="menus">
      <li class="">
        <a href="/">
          <iconpark-icon name="book-open"></iconpark-icon>
          <span>首页</span>
        </a>
      </li>
      <li class="">
        <a href="/archives">
          <iconpark-icon name="calendar-thirty-two"></iconpark-icon>
          <span>时间轴</span>
        </a>
      </li>
      <li class="">
        <a href="/photos">
          <iconpark-icon name="camera"></iconpark-icon>
          <span>照片</span>
        </a>
      </li>
      <li class="selected">
        <a href="/shuoshuo">
          <iconpark-icon name="speaker-one"></iconpark-icon>
          <span>说说</span>
        </a>
      </li>
      <li class="optionalMenuItem ">
        <a href="/tags">
          <iconpark-icon name="tag-one"></iconpark-icon>
          <span>标签</span>
        </a>
      </li>
    </ul>
  </div>
  <a class="avatar-box" target="_blank" rel="noopener" href="https://github.com/esmyy">
    <img class="avatar" src="//cdn.jsdelivr.net/gh/esmyy/imghost@main/images/2102.jpg" alt="头像" />
    <div class="status-box"></div>
  </a>
</header>
        <main class="mainContent">
            <div class="shuoshuoWrapper mt-32" id="shuoshuoList">
  <!-- 隐藏掉评论列表，只当做说说展示 -->
</div>
<div class="loadmoreWrapper loading" id="shoushuoLoadMore">
  <span class="loading">加载中...</span>
  <span class="more">加载更多</span>
  <span class="nomore">没有更多了...</span>
</div>
<div id="artitalk_main"></div>
<script src="//cdn.jsdelivr.net/gh/esmyy/imghost@main/js/artitalk.js"></script>
<script>
;(function() {
  let params = {
    pageSize: 10,
    pageNum: 1
  }

  function fetchShuoshuo() {
    const url = `https://ssapi.esmyy.com/1.1/classes/shuoshuo?where=%7B%7D&limit=${params.pageSize}&skip=${(params.pageNum - 1)*params.pageSize}&order=-createdAt`
    return fetch(url, {
      headers: params.headers
    }).then((res) => {
      return res.json();
    })
  }

  function getTime(createdAt) {
    const date = new Date(createdAt);
    const year = date.getFullYear()
    const month = ['0', date.getMonth() + 1].join('').slice(-2);
    const day = ['0', date.getDay() + 1].join('').slice(-2);
    const hours = date.getHours();
    const minutes = date.getMinutes();
    const seconds = date.getSeconds();
    return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
  }

  function createNode(config) {
    const item = document.createElement('div');
    item.classList = ['shuoshuoItem'];

    const content = document.createElement('p')
    content.classList = ['content'];
    content.innerHTML = config.atContentHtml;

    const time = document.createElement('p');
    time.classList = ['time'];
    time.innerHTML = getTime(config.createdAt)

    item.appendChild(time);
    item.appendChild(content)
    return item;
  }

  function renderList(list) {
    const shuoshuoList = document.querySelector('#shuoshuoList');
    const fragment = new DocumentFragment()
    list.forEach((item) => {
      fragment.appendChild(createNode(item));
    })
    shuoshuoList.appendChild(fragment)
  }


  const {
    appId,
    appKey,
    serverUrls
  } = window.hexoHelper.get_leancloud();
  new Artitalk({
    appId,
    appKey,
    serverUrls
  })


  const loadmore = document.getElementById('shoushuoLoadMore')
  function doFetchList() {
    fetchShuoshuo().then((data) => {
      const list = data.results || [];
      if (list.length >= 10) {
        loadmore.classList.add('more')
      } else {
        loadmore.classList.add('nomore')
      }

      renderList(data.results)
    })
  }

  function onReadyToLoad(leancloudRequestData) {
    params = {
      ...params,
      ...leancloudRequestData
    }

    doFetchList();
  }

  function registerLoadmoreHandler() {
    const loadmoreBtn = loadmore.querySelector('.more');
    loadmoreBtn.addEventListener('click', doFetchList)
  }

  if (window.leancloudRequestData) {
    onReadyToLoad(leancloudRequestData)
  } else {
    window.onLeancloudReady = onReadyToLoad
  }
  registerLoadmoreHandler();
})()
</script>
        </main>
        <footer>
    <div class="mainContent footBar">
        <p class="aboutMe">
            <a href="/about">
                About Me
            </a></p>
        <p class="copyright">@2022 By esmyy</p>
    </div>
</footer>

        <div class="backTopWrapper">
  <div class="backTopIcon">
    <iconpark-icon name="arrow-up" size="18"></iconpark-icon>
  </div>
</div>
    

</div>
<script>
// 设置”回到顶部“按钮
;(() => {
  const backTop = document.querySelector('.backTopWrapper');
  window.addEventListener('scroll', (e) => {
    const list = Array.from(backTop.classList)
    const isVisible = list.includes('visible')
    const scrollY = window.scrollY
    if (scrollY > 100 && !isVisible) {
        list.push('visible');
        backTop.classList = list.join(' ')
    } else if (scrollY < 100 && isVisible) {
        backTop.classList = list.filter(s => s !== 'visible').join(' ')
    }
  })

  backTop?.addEventListener('click', () => {
    $('html,body').animate({scrollTop: '0px'}, 800);
  })
})();

// 设置首屏图片在手机一直可见
;(() => {
    const firstScreen = document.querySelector('.firstScreen')
    const isHomeFirstPage = document.querySelector('.homeFirstPage')
    const isPhotoes = /photos/.test(location.pathname)
    const visible = isHomeFirstPage || window <= 414;
    if (visible) {
        firstScreen.classList = Array.from(firstScreen.classList).concat('visible').join(' ')
    }
})();

// 本地图片url处理
;(() => {
    function fixImgUrl() {
        const imgs = document.querySelectorAll('img');
        imgs.forEach((img) => {
            const src = img.getAttribute('src');
            // if (!/^(|http)/.test(src)) {
            //     img.setAttribute('src', '/' + src)
            // }
        })
    }

    if (/localhost/i.test(location.hostname)) {
        fixImgUrl();
    }
})();
</script>
</body>
</html>
